<div class="trait-visualization">
    <div class="trait-header">
        <div class="trait-info">
            <span class="trait-icon">@Icon</span>
            <div class="trait-details">
                <h4 class="trait-name">@TraitName</h4>
                <p class="trait-description">@Description</p>
            </div>
        </div>
        <div class="trait-value">@TraitValue%</div>
    </div>
    
    <div class="trait-progress">
        <div class="progress-bar">
            <div class="progress-fill @GetProgressClass()" 
                 style="width: @TraitValue%"></div>
        </div>
        <div class="progress-labels">
            <span class="label-start">0%</span>
            <span class="label-end">100%</span>
        </div>
    </div>
    
    <div class="trait-insights">
        <div class="insight-level">
            <span class="level-indicator @GetLevelClass()"></span>
            <span class="level-text">@GetLevelText()</span>
        </div>
    </div>
</div>

<style>
.trait-visualization {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 20px;
    transition: all 0.2s ease;
}

.trait-visualization:hover {
    border-color: #1a237e;
    box-shadow: 0 4px 12px rgba(26, 35, 126, 0.1);
    transform: translateY(-2px);
}

.trait-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.trait-info {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    flex: 1;
}

.trait-icon {
    font-size: 24px;
    flex-shrink: 0;
    margin-top: 4px;
}

.trait-details {
    flex: 1;
    min-width: 0;
}

.trait-name {
    font-size: 16px;
    font-weight: 600;
    color: #212121;
    margin: 0 0 4px 0;
    font-family: 'Inter', sans-serif;
}

.trait-description {
    font-size: 13px;
    color: #757575;
    margin: 0;
    line-height: 1.3;
}

.trait-value {
    font-size: 24px;
    font-weight: 700;
    color: #1a237e;
    font-family: 'Roboto Mono', monospace;
    flex-shrink: 0;
}

.trait-progress {
    margin-bottom: 12px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 2s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.progress-fill.excellent {
    background: linear-gradient(90deg, #4caf50 0%, #66bb6a 100%);
}

.progress-fill.high {
    background: linear-gradient(90deg, #2196f3 0%, #42a5f5 100%);
}

.progress-fill.medium {
    background: linear-gradient(90deg, #ff9800 0%, #ffb74d 100%);
}

.progress-fill.low {
    background: linear-gradient(90deg, #f44336 0%, #ef5350 100%);
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: repeating-linear-gradient(
        90deg,
        transparent,
        transparent 8px,
        rgba(255, 255, 255, 0.2) 8px,
        rgba(255, 255, 255, 0.2) 10px
    );
}

.progress-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
    font-size: 11px;
    color: #9e9e9e;
    font-family: 'Roboto Mono', monospace;
}

.trait-insights {
    display: flex;
    justify-content: flex-end;
}

.insight-level {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: 500;
}

.level-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.level-indicator.excellent {
    background: #4caf50;
    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
}

.level-indicator.high {
    background: #2196f3;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
}

.level-indicator.medium {
    background: #ff9800;
    box-shadow: 0 0 0 2px rgba(255, 152, 0, 0.2);
}

.level-indicator.low {
    background: #f44336;
    box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.2);
}

.level-text {
    color: #616161;
    font-family: 'Inter', sans-serif;
}
</style>

@code {
    [Parameter, EditorRequired] public string TraitName { get; set; } = "";
    [Parameter, EditorRequired] public int TraitValue { get; set; } = 0;
    [Parameter] public string Description { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "⭐";

    private string GetProgressClass()
    {
        return TraitValue switch
        {
            >= 90 => "excellent",
            >= 70 => "high", 
            >= 50 => "medium",
            _ => "low"
        };
    }

    private string GetLevelClass()
    {
        return GetProgressClass();
    }

    private string GetLevelText()
    {
        return TraitValue switch
        {
            >= 90 => "Исключительно высокий",
            >= 80 => "Очень высокий",
            >= 70 => "Высокий",
            >= 60 => "Выше среднего", 
            >= 50 => "Средний",
            >= 40 => "Ниже среднего",
            >= 30 => "Низкий",
            _ => "Очень низкий"
        };
    }
}