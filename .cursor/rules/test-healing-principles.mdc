---
description: Comprehensive methodology for achieving 100% test success through honest greening principles. Activated by keywords like "failing tests", "test failures", "–æ–∑–µ–ª–µ–Ω–µ–Ω–∏–µ", "green tests", "test fixes", "DI issues", "integration tests"
globs: "**/*.cs"
alwaysApply: false
---

# üß™ TEST HEALING PRINCIPLES: –ß–ï–°–¢–ù–û–ï –û–ó–ï–õ–ï–ù–ï–ù–ò–ï –ù–ê 100% üß™

## üéØ –ó–û–õ–û–¢–´–ï –ü–†–ò–ù–¶–ò–ü–´ –õ–ï–ß–ï–ù–ò–Ø –¢–ï–°–¢–û–í

### 1. üö´ –ù–£–õ–ï–í–ê–Ø –¢–û–õ–ï–†–ê–ù–¢–ù–û–°–¢–¨ –ö –ü–†–û–ë–õ–ï–ú–ê–ú
- **–ü–†–ê–í–ò–õ–û:** –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –í–°–ï failing tests –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- **–ó–ê–ü–†–ï–©–ï–ù–û:** –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–∂–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–ª–∏–≤–∞—é—â–µ–≥–æ—Å—è —Ç–µ—Å—Ç–∞
- **–¶–ï–õ–¨:** 100% –∑–µ–ª—ë–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD pipeline

### 2. üéØ –ß–ï–°–¢–ù–´–ô –ü–û–î–•–û–î
- **–ü–†–ê–í–ò–õ–û:** –ù–ò–ö–ê–ö–ò–• Skip attributes, –ù–ò–ö–ê–ö–ò–• –æ–±—Ö–æ–¥–Ω—ã—Ö –ø—É—Ç–µ–π
- **–ó–ê–ü–†–ï–©–ï–ù–û:**
  - `[Skip]`, `[Ignore]`, `[Fact(Skip = "...")]`
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
  - –°–Ω–∏–∂–µ–Ω–∏–µ test coverage
  - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–∫–∏ –≤–º–µ—Å—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- **–ü–†–ò–ù–¶–ò–ü:** –õ–µ—á–∏–º –ø—Ä–∏—á–∏–Ω—É, –Ω–µ —Å–∏–º–ø—Ç–æ–º—ã

### 3. üèóÔ∏è –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
- **–ü–†–ê–í–ò–õ–û:** –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —É –∫–æ—Ä–Ω—è
- **–§–û–ö–£–°:**
  - DI (Dependency Injection) –ø—Ä–æ–±–ª–µ–º—ã
  - –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
  - –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **–ü–û–î–•–û–î:** –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –∑–∞–ø–ª–∞—Ç–æ–∫

### 4. üîÑ –ü–û–õ–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨
- **–ü–†–ê–í–ò–õ–û:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –í–°–ï–ú–ò –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **–í–ê–õ–ò–î–ê–¶–ò–Ø:** –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- **–ü–û–ö–†–´–¢–ò–ï:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–∞

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ê–Ø –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø

### –≠—Ç–∞–ø 1: –°–±–æ—Ä —Ñ–∞–∫—Ç–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è baseline
dotnet test --logger "console;verbosity=detailed" --no-build

# –ê–Ω–∞–ª–∏–∑ failing tests
dotnet test --logger "trx" --results-directory ./test-results
```

### –≠—Ç–∞–ø 2: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º
1. **DI/Service Registration Issues**
   - `Unable to resolve service for type`
   - `Circular dependency detected`
   - `Multiple registrations found`

2. **Mock/Test Infrastructure Issues**
   - `Expression tree cannot contain calls`
   - `Mock setup failures`
   - `Ambiguous method calls`

3. **Configuration Issues**
   - Missing configuration values
   - Wrong connection strings
   - Incompatible service lifetimes

4. **Architectural Issues**
   - Interface segregation violations
   - Breaking changes in dependencies
   - Version conflicts

### –≠—Ç–∞–ø 3: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é –ø—Ä–∏—á–∏–Ω—É –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –≤–ª–∏—è–Ω–∏—é
- –°–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üõ†Ô∏è –ú–ï–¢–û–î–´ –õ–ï–ß–ï–ù–ò–Ø

### DI Issues - –õ–µ—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```csharp
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
[Fact(Skip = "DI issue")]
public void Test_Method() { }

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
builder.Services.AddScoped<IService, ServiceImplementation>();
```

### Mock Issues - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–∫–æ–≤
```csharp
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–ª–æ–∂–Ω—ã–µ expression trees
mockService.Setup(x => x.Method(It.IsAny<Type>())).ReturnsAsync(default);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã
mockService.Setup(x => x.Method(It.IsAny<Type>())).ReturnsAsync(() => default);
```

### Configuration Issues - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```csharp
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
services.AddSingleton<IConfiguration>(new ConfigurationBuilder()
    .AddInMemoryCollection(testConfiguration)
    .Build());
```

## ‚úÖ –í–ê–õ–ò–î–ê–¶–ò–û–ù–ù–´–ô –ß–ï–ö–õ–ò–°–¢

### Pre-Commit –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] 100% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç Skip/Ignore –∞—Ç—Ä–∏–±—É—Ç–æ–≤
- [ ] –ù–µ—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- [ ] Build –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ warnings –ø–æ DI

### Post-Fix –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- [ ] –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- [ ] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–µ–Ω–∞

### CI/CD –í–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] Pipeline –∑–µ–ª—ë–Ω—ã–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Coverage –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ —Å–Ω–∏–∂–µ–Ω—ã
- [ ] –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

## üö® –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–´ - –ß–¢–û –ù–ï –î–ï–õ–ê–¢–¨

### ‚ùå –ó–∞–ø–ª–∞—Ç–∫–∏ –≤–º–µ—Å—Ç–æ –ª–µ—á–µ–Ω–∏—è
```csharp
// –ü–õ–û–•–û - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
[Fact(Skip = "Will fix later")]
public void Test_ImportantFeature() { }

// –ü–õ–û–•–û - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
try {
    service.Method();
} catch {
    // Ignore DI issues
}
```

### ‚ùå –°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
```csharp
// –ü–õ–û–•–û - —É–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏
[Fact]
public void Test_Always_Passes()
{
    Assert.True(true); // Meaningless test
}
```

### ‚ùå –õ–æ–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```csharp
// –ü–õ–û–•–û - —Ñ–µ–π–∫–æ–≤—ã–µ –º–æ–∫–∏
mockService.Setup(x => x.CriticalMethod()).Returns(null);
// –†–µ–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–µ—Ä–Ω—ë—Ç null!
```

## üéØ –≠–¢–ê–õ–û–ù–ù–´–ï –ü–û–ö–ê–ó–ê–¢–ï–õ–ò

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- **Test Success Rate:** 100% (77/77, 100/100, etc.)
- **CI/CD Pipeline:** –ó–µ–ª—ë–Ω—ã–π —Å—Ç–∞—Ç—É—Å
- **Skip Count:** 0 –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- **Coverage:** ‚â•95% –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:** <5 –º–∏–Ω—É—Ç
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö DI –ø—Ä–æ–±–ª–µ–º:** <30 –º–∏–Ω—É—Ç
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** <2 —á–∞—Å–æ–≤
- **–ü–æ–ª–Ω–æ–µ –æ–∑–µ–ª–µ–Ω–µ–Ω–∏–µ:** <1 —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è

## üîÑ –ù–ï–ü–†–ï–†–´–í–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã failing tests
- –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä–Ω–µ–≤—ã—Ö –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±–ª–µ–º
- –í—ã—è–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ —Ä–µ–≥—Ä–µ—Å—Å–∏—è—Ö

### –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ DI
- Pre-commit hooks –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ–≤—å—é

### –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –û–±–º–µ–Ω –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

---

**–ü–û–ú–ù–ò:** –ß–µ—Å—Ç–Ω–æ–µ –æ–∑–µ–ª–µ–Ω–µ–Ω–∏–µ - —ç—Ç–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –≤ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
–ö–∞–∂–¥—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–¥—É–∫—Ç —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ! üöÄ